EESchema Schematic File Version 4
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L MCU_Microchip_ATmega:ATmega328PB-MU U?
U 1 1 5C2CA652
P 3050 3350
F 0 "U?" H 3050 1764 50  0000 C CNN
F 1 "ATmega328PB-MU" H 3050 1673 50  0000 C CNN
F 2 "Package_DFN_QFN:QFN-32-1EP_5x5mm_P0.5mm_EP3.1x3.1mm" H 3050 3350 50  0001 C CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/40001906C.pdf" H 3050 3350 50  0001 C CNN
	1    3050 3350
	1    0    0    -1  
$EndComp
$Comp
L Device:Crystal Y?
U 1 1 5C2CAD65
P 4000 2700
F 0 "Y?" V 3954 2831 50  0000 L CNN
F 1 "16MHz" V 4045 2831 50  0000 L CNN
F 2 "" H 4000 2700 50  0001 C CNN
F 3 "~" H 4000 2700 50  0001 C CNN
	1    4000 2700
	0    1    1    0   
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5C2CAFE0
P 4350 2550
F 0 "C?" V 4121 2550 50  0000 C CNN
F 1 "22pF" V 4212 2550 50  0000 C CNN
F 2 "" H 4350 2550 50  0001 C CNN
F 3 "~" H 4350 2550 50  0001 C CNN
	1    4350 2550
	0    1    1    0   
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5C2CB02A
P 4350 2850
F 0 "C?" V 4213 2850 50  0000 C CNN
F 1 "22pF" V 4122 2850 50  0000 C CNN
F 2 "" H 4350 2850 50  0001 C CNN
F 3 "~" H 4350 2850 50  0001 C CNN
	1    4350 2850
	0    -1   -1   0   
$EndComp
Wire Wire Line
	4000 2550 4250 2550
Wire Wire Line
	4000 2850 4250 2850
Wire Wire Line
	4450 2550 4450 2700
Text GLabel 4550 2700 2    50   Input ~ 0
GND
Wire Wire Line
	4450 2700 4550 2700
Connection ~ 4450 2700
Wire Wire Line
	4450 2700 4450 2850
$Comp
L Transistor_FET:IRF6613 Q?
U 1 1 5C2CC543
P 8050 1200
F 0 "Q?" H 8256 1246 50  0000 L CNN
F 1 "IRF6613" H 8256 1155 50  0000 L CNN
F 2 "Package_DirectFET:DirectFET_MT" H 8050 1200 50  0001 C CIN
F 3 "https://www.infineon.com/dgdl/irf6613pbf.pdf?fileId=5546d462533600a4015355e82b9b1a0d" H 8050 1200 50  0001 L CNN
	1    8050 1200
	1    0    0    -1  
$EndComp
$Comp
L Transistor_FET:IRF6613 Q?
U 1 1 5C2CC587
P 8050 2150
F 0 "Q?" H 8256 2196 50  0000 L CNN
F 1 "IRF6613" H 8256 2105 50  0000 L CNN
F 2 "Package_DirectFET:DirectFET_MT" H 8050 2150 50  0001 C CIN
F 3 "https://www.infineon.com/dgdl/irf6613pbf.pdf?fileId=5546d462533600a4015355e82b9b1a0d" H 8050 2150 50  0001 L CNN
	1    8050 2150
	1    0    0    -1  
$EndComp
$Comp
L Transistor_FET:IRF6613 Q?
U 1 1 5C2CC5BB
P 8050 3100
F 0 "Q?" H 8256 3146 50  0000 L CNN
F 1 "IRF6613" H 8256 3055 50  0000 L CNN
F 2 "Package_DirectFET:DirectFET_MT" H 8050 3100 50  0001 C CIN
F 3 "https://www.infineon.com/dgdl/irf6613pbf.pdf?fileId=5546d462533600a4015355e82b9b1a0d" H 8050 3100 50  0001 L CNN
	1    8050 3100
	1    0    0    -1  
$EndComp
$Comp
L Driver_FET:MCP1415 U?
U 1 1 5C2CC96E
P 7300 1200
F 0 "U?" H 6959 1246 50  0000 R CNN
F 1 "MCP1415" H 6959 1155 50  0000 R CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 7300 600 50  0001 C CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/20002092F.pdf" H 7100 1450 50  0001 C CNN
	1    7300 1200
	1    0    0    -1  
$EndComp
$Comp
L Driver_FET:MCP1415 U?
U 1 1 5C2CC9C0
P 7300 2150
F 0 "U?" H 6959 2196 50  0000 R CNN
F 1 "MCP1415" H 6959 2105 50  0000 R CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 7300 1550 50  0001 C CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/20002092F.pdf" H 7100 2400 50  0001 C CNN
	1    7300 2150
	1    0    0    -1  
$EndComp
$Comp
L Driver_FET:MCP1415 U?
U 1 1 5C2CCA02
P 7300 3100
F 0 "U?" H 6959 3146 50  0000 R CNN
F 1 "MCP1415" H 6959 3055 50  0000 R CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 7300 2500 50  0001 C CIN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/20002092F.pdf" H 7100 3350 50  0001 C CNN
	1    7300 3100
	1    0    0    -1  
$EndComp
Wire Wire Line
	7700 1200 7850 1200
Text GLabel 7400 1500 2    50   Input ~ 0
GND
Wire Wire Line
	7300 1500 7400 1500
Text GLabel 7400 900  2    50   Input ~ 0
+5V
Wire Wire Line
	7300 900  7400 900 
Text GLabel 8150 1450 3    50   Input ~ 0
GND
Wire Wire Line
	8150 1450 8150 1400
Text GLabel 7400 2450 2    50   Input ~ 0
GND
Text GLabel 7400 3400 2    50   Input ~ 0
GND
Text GLabel 8150 3350 3    50   Input ~ 0
GND
Text GLabel 8150 2400 3    50   Input ~ 0
GND
Text GLabel 7400 1850 2    50   Input ~ 0
+5V
Text GLabel 7400 2800 2    50   Input ~ 0
+5V
Wire Wire Line
	7300 1850 7400 1850
Wire Wire Line
	7300 2450 7400 2450
Wire Wire Line
	7300 2800 7400 2800
Wire Wire Line
	7300 3400 7400 3400
Wire Wire Line
	8150 3350 8150 3300
Wire Wire Line
	8150 2350 8150 2400
Wire Wire Line
	7700 2150 7850 2150
Wire Wire Line
	7700 3100 7850 3100
Wire Wire Line
	8150 950  8150 1000
Wire Wire Line
	8150 1900 8150 1950
Wire Wire Line
	8150 2850 8150 2900
$Comp
L SamacSys_Parts:MAX17261METD+ IC?
U 1 1 5C2CE787
P 7750 4850
F 0 "IC?" H 8350 5115 50  0000 C CNN
F 1 "MAX17261METD+" H 8350 5024 50  0000 C CNN
F 2 "SON40P300X300X80-15N" H 8800 4950 50  0001 L CNN
F 3 "https://datasheets.maximintegrated.com/en/ds/MAX17261.pdf" H 8800 4850 50  0001 L CNN
F 4 "Battery Management 5A Multi-Cell Fuel Gauge with ModelGauge m5 EZ" H 8800 4750 50  0001 L CNN "Description"
F 5 "0.8" H 8800 4650 50  0001 L CNN "Height"
F 6 "Maxim Integrated" H 8800 4550 50  0001 L CNN "Manufacturer_Name"
F 7 "MAX17261METD+" H 8800 4450 50  0001 L CNN "Manufacturer_Part_Number"
F 8 "" H 8800 4350 50  0001 L CNN "RS Part Number"
F 9 "" H 8800 4250 50  0001 L CNN "RS Price/Stock"
F 10 "700-MAX17261METD+" H 8800 4150 50  0001 L CNN "Mouser Part Number"
F 11 "https://www.mouser.com/Search/Refine.aspx?Keyword=700-MAX17261METD%2B" H 8800 4050 50  0001 L CNN "Mouser Price/Stock"
	1    7750 4850
	1    0    0    -1  
$EndComp
$Comp
L Sensor_Current:ACS723xLCTR-10AU U?
U 1 1 5C2CE9A0
P 9150 1150
F 0 "U?" H 9150 1728 50  0000 C CNN
F 1 "ACS723xLCTR-10AU" H 9150 1637 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 9250 800 50  0001 L CIN
F 3 "http://www.allegromicro.com/~/media/Files/Datasheets/ACS723-Datasheet.ashx?la=en" H 9150 1150 50  0001 C CNN
	1    9150 1150
	1    0    0    -1  
$EndComp
$Comp
L Sensor_Current:ACS723xLCTR-10AU U?
U 1 1 5C2CEA24
P 9150 2100
F 0 "U?" H 9150 2678 50  0000 C CNN
F 1 "ACS723xLCTR-10AU" H 9150 2587 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 9250 1750 50  0001 L CIN
F 3 "http://www.allegromicro.com/~/media/Files/Datasheets/ACS723-Datasheet.ashx?la=en" H 9150 2100 50  0001 C CNN
	1    9150 2100
	1    0    0    -1  
$EndComp
$Comp
L Sensor_Current:ACS723xLCTR-10AU U?
U 1 1 5C2CEA70
P 9150 3050
F 0 "U?" H 9150 2564 50  0000 C CNN
F 1 "ACS723xLCTR-10AU" H 9150 2473 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 9250 2700 50  0001 L CIN
F 3 "http://www.allegromicro.com/~/media/Files/Datasheets/ACS723-Datasheet.ashx?la=en" H 9150 3050 50  0001 C CNN
	1    9150 3050
	1    0    0    -1  
$EndComp
Wire Wire Line
	8150 950  8750 950 
Text GLabel 8750 1350 3    50   Input ~ 0
MOTOR
Text GLabel 9650 1550 2    50   Input ~ 0
GND
Text GLabel 9250 750  2    50   Input ~ 0
+5V
Wire Wire Line
	9150 750  9250 750 
Wire Wire Line
	8750 1250 8750 1350
Wire Wire Line
	9550 1250 9550 1550
Wire Wire Line
	9150 1550 9550 1550
Wire Wire Line
	9550 1550 9650 1550
Connection ~ 9550 1550
Wire Wire Line
	8150 1900 8750 1900
Wire Wire Line
	8150 2850 8750 2850
Text GLabel 9250 2650 2    50   Input ~ 0
+5V
Text GLabel 9650 2500 2    50   Input ~ 0
GND
Text GLabel 9650 3450 2    50   Input ~ 0
GND
Wire Wire Line
	9150 2650 9250 2650
Wire Wire Line
	9650 2500 9550 2500
Wire Wire Line
	9550 2200 9550 2500
Connection ~ 9550 2500
Wire Wire Line
	9550 2500 9150 2500
Wire Wire Line
	9650 3450 9550 3450
Wire Wire Line
	9550 3150 9550 3450
Connection ~ 9550 3450
Wire Wire Line
	9550 3450 9150 3450
Text GLabel 9250 1700 2    50   Input ~ 0
+5V
Wire Wire Line
	9250 1700 9150 1700
Text GLabel 8750 2300 3    50   Input ~ 0
CHARGE
Text GLabel 8750 3250 3    50   Input ~ 0
CONTROL
Wire Wire Line
	8750 2300 8750 2200
Wire Wire Line
	8750 3250 8750 3150
$Comp
L Device:R_Small R?
U 1 1 5C2D46A9
P 9550 5350
F 0 "R?" H 9609 5396 50  0000 L CNN
F 1 "1.8M" H 9609 5305 50  0000 L CNN
F 2 "" H 9550 5350 50  0001 C CNN
F 3 "~" H 9550 5350 50  0001 C CNN
	1    9550 5350
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R?
U 1 1 5C2D475F
P 9850 5250
F 0 "R?" V 10046 5250 50  0000 C CNN
F 1 "200k" V 9955 5250 50  0000 C CNN
F 2 "" H 9850 5250 50  0001 C CNN
F 3 "~" H 9850 5250 50  0001 C CNN
	1    9850 5250
	0    -1   -1   0   
$EndComp
Text GLabel 10000 5250 2    50   Input ~ 0
BGND
Text GLabel 9550 5500 3    50   Input ~ 0
VBAT
Wire Wire Line
	9950 5250 10000 5250
$Comp
L Device:C_Small C?
U 1 1 5C2D6508
P 9200 5150
F 0 "C?" V 8971 5150 50  0000 C CNN
F 1 "0.47u" V 9062 5150 50  0000 C CNN
F 2 "" H 9200 5150 50  0001 C CNN
F 3 "~" H 9200 5150 50  0001 C CNN
	1    9200 5150
	0    1    1    0   
$EndComp
Wire Wire Line
	8950 5150 9100 5150
Wire Wire Line
	8950 5250 9550 5250
Connection ~ 9550 5250
Wire Wire Line
	9550 5250 9750 5250
Wire Wire Line
	9550 5500 9550 5450
Text GLabel 9350 5150 2    50   Input ~ 0
BGND
Wire Wire Line
	9350 5150 9300 5150
Text GLabel 7700 4850 0    50   Input ~ 0
+5V
Text GLabel 7700 5350 0    50   Input ~ 0
+5V
Wire Wire Line
	7700 5350 7750 5350
Wire Wire Line
	7700 4850 7750 4850
$Comp
L Device:R_Small R?
U 1 1 5C2DC9F7
P 7750 5650
F 0 "R?" H 7809 5696 50  0000 L CNN
F 1 "5m" H 7809 5605 50  0000 L CNN
F 2 "" H 7750 5650 50  0001 C CNN
F 3 "~" H 7750 5650 50  0001 C CNN
	1    7750 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	7750 5750 7750 5950
Wire Wire Line
	7750 5950 8350 5950
Wire Wire Line
	8350 5950 8950 5950
Wire Wire Line
	8950 5950 8950 5450
Connection ~ 8350 5950
Wire Wire Line
	8950 5450 8950 5350
Connection ~ 8950 5450
Wire Wire Line
	7750 5550 7750 5450
Text GLabel 7700 5450 0    50   Input ~ 0
GND
Wire Wire Line
	7700 5450 7750 5450
Connection ~ 7750 5450
Text GLabel 9050 4600 1    50   Input ~ 0
ALERT
Wire Wire Line
	8950 5050 9050 5050
Wire Wire Line
	9050 5050 9050 4600
Text GLabel 3700 4150 2    50   Input ~ 0
ALERT
Wire Wire Line
	3650 2850 4000 2850
Connection ~ 4000 2850
Wire Wire Line
	3650 2750 3850 2750
Wire Wire Line
	3850 2750 3850 2550
Wire Wire Line
	3850 2550 4000 2550
Connection ~ 4000 2550
Text GLabel 3700 3050 2    50   Input ~ 0
C_MOT
Text GLabel 3700 3150 2    50   Input ~ 0
C_CHG
Text GLabel 3700 3250 2    50   Input ~ 0
C_CTR
Text GLabel 9600 950  2    50   Input ~ 0
C_MOT
Text GLabel 9600 1900 2    50   Input ~ 0
C_CHG
Text GLabel 9600 2850 2    50   Input ~ 0
C_CTR
Wire Wire Line
	9550 2850 9600 2850
Wire Wire Line
	9550 1900 9600 1900
Wire Wire Line
	9550 950  9600 950 
Wire Wire Line
	3650 3050 3700 3050
Wire Wire Line
	3650 3150 3700 3150
Wire Wire Line
	3650 3250 3700 3250
Text GLabel 6950 1200 0    50   Input ~ 0
MOT_ON
Text GLabel 6950 2150 0    50   Input ~ 0
CHG_ON
Text GLabel 6950 3100 0    50   Input ~ 0
CTR_ON
Wire Wire Line
	6950 3100 7000 3100
Wire Wire Line
	6950 2150 7000 2150
Wire Wire Line
	6950 1200 7000 1200
Text GLabel 3700 3850 2    50   Input ~ 0
MOT_ON
Text GLabel 3700 3950 2    50   Input ~ 0
CHG_ON
Text GLabel 3700 4050 2    50   Input ~ 0
CTR_ON
Wire Wire Line
	3650 3850 3700 3850
Wire Wire Line
	3650 3950 3700 3950
Wire Wire Line
	3650 4050 3700 4050
Wire Wire Line
	3650 4150 3700 4150
Text Notes 8050 750  2    118  ~ 0
Power & control
Text Notes 8450 4450 2    118  ~ 0
Fuel gauge
$Comp
L Connector_Generic:Conn_01x02 J?
U 1 1 5C2FB384
P 1650 6050
F 0 "J?" H 1570 5725 50  0000 C CNN
F 1 "Conn_01x02" H 1570 5816 50  0000 C CNN
F 2 "" H 1650 6050 50  0001 C CNN
F 3 "~" H 1650 6050 50  0001 C CNN
	1    1650 6050
	-1   0    0    1   
$EndComp
Text GLabel 1950 5950 2    49   Input ~ 0
BGND
$Comp
L Device:Fuse F?
U 1 1 5C2FEB61
P 2350 6050
F 0 "F?" V 2153 6050 50  0000 C CNN
F 1 "Fuse" V 2244 6050 50  0000 C CNN
F 2 "" V 2280 6050 50  0001 C CNN
F 3 "~" H 2350 6050 50  0001 C CNN
	1    2350 6050
	0    1    1    0   
$EndComp
Wire Wire Line
	1850 6050 2200 6050
Wire Wire Line
	1850 5950 1950 5950
Text GLabel 2550 6050 2    49   Input ~ 0
VBAT
Wire Wire Line
	2500 6050 2550 6050
$Comp
L SamacSys_Parts:MP2307DN-LF-Z IC?
U 1 1 5C3044AC
P 4250 5850
F 0 "IC?" H 4850 6115 50  0000 C CNN
F 1 "MP2307DN-LF-Z" H 4850 6024 50  0000 C CNN
F 2 "SOIC127P600X170-9N" H 5300 5950 50  0001 L CNN
F 3 "http://www.mouser.com/ds/2/277/MP2307_r1.9-371737.pdf" H 5300 5850 50  0001 L CNN
F 4 "Switching Voltage Regulators 3A/23VSynchRectified Step-down Converter" H 5300 5750 50  0001 L CNN "Description"
F 5 "1.7" H 5300 5650 50  0001 L CNN "Height"
F 6 "Monolithic Power Systems (MPS)" H 5300 5550 50  0001 L CNN "Manufacturer_Name"
F 7 "MP2307DN-LF-Z" H 5300 5450 50  0001 L CNN "Manufacturer_Part_Number"
F 8 "" H 5300 5350 50  0001 L CNN "RS Part Number"
F 9 "" H 5300 5250 50  0001 L CNN "RS Price/Stock"
F 10 "946-MP2307DNLFZ" H 5300 5150 50  0001 L CNN "Mouser Part Number"
F 11 "https://www.mouser.com/Search/Refine.aspx?Keyword=946-MP2307DNLFZ" H 5300 5050 50  0001 L CNN "Mouser Price/Stock"
	1    4250 5850
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R?
U 1 1 5C30461B
P 5700 6150
F 0 "R?" V 5600 6350 50  0000 C CNN
F 1 "44.2k" V 5600 6150 50  0000 C CNN
F 2 "" H 5700 6150 50  0001 C CNN
F 3 "~" H 5700 6150 50  0001 C CNN
	1    5700 6150
	0    1    1    0   
$EndComp
$Comp
L Device:R_Small R?
U 1 1 5C304CF7
P 5600 6350
F 0 "R?" H 5659 6396 50  0000 L CNN
F 1 "10k" H 5659 6305 50  0000 L CNN
F 2 "" H 5600 6350 50  0001 C CNN
F 3 "~" H 5600 6350 50  0001 C CNN
	1    5600 6350
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5C304FFF
P 4150 5700
F 0 "C?" V 3921 5700 50  0000 C CNN
F 1 "10n" V 4012 5700 50  0000 C CNN
F 2 "" H 4150 5700 50  0001 C CNN
F 3 "~" H 4150 5700 50  0001 C CNN
	1    4150 5700
	0    1    1    0   
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5C305073
P 5900 6350
F 0 "C?" H 5992 6396 50  0000 L CNN
F 1 "22u" H 5992 6305 50  0000 L CNN
F 2 "" H 5900 6350 50  0001 C CNN
F 3 "~" H 5900 6350 50  0001 C CNN
	1    5900 6350
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C?
U 1 1 5C3050D1
P 5600 5850
F 0 "C?" V 5371 5850 50  0000 C CNN
F 1 "0.1u" V 5462 5850 50  0000 C CNN
F 2 "" H 5600 5850 50  0001 C CNN
F 3 "~" H 5600 5850 50  0001 C CNN
	1    5600 5850
	0    1    1    0   
$EndComp
$Comp
L Device:L_Small L?
U 1 1 5C3051DA
P 3600 6050
F 0 "L?" V 3785 6050 50  0000 C CNN
F 1 "10u" V 3694 6050 50  0000 C CNN
F 2 "" H 3600 6050 50  0001 C CNN
F 3 "~" H 3600 6050 50  0001 C CNN
	1    3600 6050
	0    -1   -1   0   
$EndComp
Wire Wire Line
	4250 5700 4250 5850
Wire Wire Line
	5450 6150 5600 6150
Wire Wire Line
	5600 6150 5600 6250
Connection ~ 5600 6150
Wire Wire Line
	5800 6150 5900 6150
Wire Wire Line
	5900 6150 5900 6250
Text GLabel 6000 6150 2    49   Input ~ 0
+5V
Wire Wire Line
	5900 6150 6000 6150
Connection ~ 5900 6150
Text GLabel 3450 6050 0    49   Input ~ 0
+5V
Wire Wire Line
	3450 6050 3500 6050
Text GLabel 4200 5950 0    49   Input ~ 0
VBAT
Wire Wire Line
	4200 5950 4250 5950
Wire Wire Line
	3700 6050 3900 6050
Wire Wire Line
	4050 5700 3900 5700
Wire Wire Line
	3900 5700 3900 6050
Connection ~ 3900 6050
Wire Wire Line
	3900 6050 4250 6050
Text GLabel 4200 6150 0    49   Input ~ 0
BGND
Wire Wire Line
	4250 6150 4200 6150
Wire Wire Line
	5600 6450 5750 6450
Text GLabel 5750 6500 3    49   Input ~ 0
BGND
Wire Wire Line
	5750 6500 5750 6450
Connection ~ 5750 6450
Wire Wire Line
	5750 6450 5900 6450
Wire Wire Line
	5450 5850 5500 5850
Text GLabel 5800 5850 1    49   Input ~ 0
BGND
Wire Wire Line
	5800 5850 5700 5850
$Comp
L Device:R_Small R?
U 1 1 5C332E2E
P 5750 5950
F 0 "R?" V 5750 6400 50  0000 C CNN
F 1 "100k" V 5750 6200 50  0000 C CNN
F 2 "" H 5750 5950 50  0001 C CNN
F 3 "~" H 5750 5950 50  0001 C CNN
	1    5750 5950
	0    1    1    0   
$EndComp
Wire Wire Line
	5450 5950 5650 5950
Text GLabel 5900 5900 1    49   Input ~ 0
VBAT
Wire Wire Line
	5850 5950 5900 5950
Wire Wire Line
	5900 5950 5900 5900
$EndSCHEMATC
